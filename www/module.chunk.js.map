{"version":3,"sources":["/Users/dwsparis/Documents/htdocs/PROJETS/SOCIALNETWORKauth/ANGclient/src/app/components/homepage/homepage.component.html","/Users/dwsparis/Documents/htdocs/PROJETS/SOCIALNETWORKauth/ANGclient/src/app/components/homepage/homepage.component.ts","/Users/dwsparis/Documents/htdocs/PROJETS/SOCIALNETWORKauth/ANGclient/src/app/components/homepage/module.ts","/Users/dwsparis/Documents/htdocs/PROJETS/SOCIALNETWORKauth/ANGclient/src/app/components/homepage/route.ts"],"names":[],"mappings":"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","file":"module.chunk.js","sourcesContent":["module.exports = \"<section id=\\\"loginSection\\\">\\n    <h1>HeyU <span>MEAN social App for fun</span></h1>\\n    <form id=\\\"loginForm\\\" action=\\\"#\\\" (submit)=\\\"submitLogUser()\\\">\\n\\n        <fieldset>\\n            <label for=\\\"userEmail\\\">Email <em><span [ngClass]=\\\"{'open': errorMsg.email}\\\">Champ obligatoire</span></em></label>\\n            <input type=\\\"text\\\" id=\\\"userEmail\\\" (focus)=\\\"errorMsg.email = false; errorMsg.invalidUser = false\\\" [(ngModel)]=\\\"userLoginObject.email\\\" name=\\\"email\\\">\\n        \\n            <label for=\\\"userPassword\\\">Mot de passe <em><span [ngClass]=\\\"{'open': errorMsg.password}\\\">Champ obligatoire</span><span [ngClass]=\\\"{'open': errorMsg.invalidPassword}\\\">Mot de passe non valide</span></em></label>\\n            <input type=\\\"password\\\" id=\\\"userPassword\\\" (focus)=\\\"errorMsg.password = false; errorMsg.invalidPassword = false\\\" [(ngModel)]=\\\"userLoginObject.password\\\" name=\\\"password\\\">\\n        \\n            <button type=\\\"submit\\\">Connexion</button>\\n            <button (click)=\\\"submitFacebookConnect()\\\" >Facebook connect</button>\\n        </fieldset>\\n    \\n    </form>\\n</section>\\n<aside id=\\\"loader\\\" [ngClass]=\\\"{  open: loaderIsClose, right: loaderIsRight }\\\"></aside>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/dwsparis/Documents/htdocs/PROJETS/SOCIALNETWORKauth/ANGclient/src/app/components/homepage/homepage.component.html\n// module id = ../../../../../src/app/components/homepage/homepage.component.html\n// module chunks = module","/*\nConfiguration du composants\n*/\n  // Import des interfaces\n  import { Component, OnInit } from '@angular/core';\n  import { Router } from '@angular/router';\n  import { FacebookService, LoginOptions, AuthResponse, LoginResponse, InitParams } from 'ngx-facebook';\n  \n  // Import des modules\n  import { UserService } from '../../services/user/user.service';\n  import { UserModel } from '../../models/user.model';\n  import { UserLoginModel } from '../../models/user.login';\n  import { LoginFormModel } from '../../models/login.form';\n\n  // Définition du composant\n  @Component({\n    selector: 'app-homepage',\n    templateUrl: './homepage.component.html',\n    providers: [ UserService ]\n  })\n//\n\n\n\n/*\nExport du composant\n*/\n  export class HomepageComponent implements OnInit {\n\n    // Variables : Loader\n    public loaderIsClose: boolean = true;\n    public loaderIsRight: boolean = false;\n\n    // Variables : Login\n    public userLoginObject: UserLoginModel = { \n      email: null, \n      password: null \n    };\n\n    public errorMsg: LoginFormModel = { \n      errors: 0, \n      email: false, \n      password: false, \n      invalidUser: false, \n      invalidPassword: \n      false \n    };\n\n    // Initialisation de l'objet utilisateur\n    private userObject : UserModel = {\n      name: null,\n      email: null,\n      password: null,\n      gender: null,\n      type: null,\n      facebook: {\n        token: null,\n        id: null,\n        avatar: null\n      }\n    }\n\n    constructor( \n      private userService: UserService, \n      private facebookService: FacebookService, \n      private router: Router) \n    {\n      // Configuration du module Facebook\n      const initParams: InitParams = {\n        appId: '183483015710927',\n        xfbml: true,\n        version: 'v2.8'\n      };\n      \n      // Initialisation du module Facebook\n      facebookService.init(initParams);       \n    }\n\n    // Connecter l'utilisateur à Facebook\n    public submitFacebookConnect = () => {\n      \n      // Connecter l'utilisateur sur Facebook\n      this.facebookService.login()\n\n        // Capter le success de la requête : Facebook Login\n        .then((response: LoginResponse) =>{\n          // Définition des données Facebook utilisateur\n          this.userObject.facebook.token = response.authResponse.accessToken;\n          this.userObject.facebook.id = response.authResponse.userID;\n\n          // Récupérer les informations utilisateur sur Facebook\n          this.facebookService.api('me?fields=id,name,birthday,email, gender, picture')\n            // Capter le success de la requête : Facebook API\n            .then( response => {\n              // Définition des données Personnelles utilisateur\n              this.userObject.facebook.avatar = response.picture.data.url;\n              this.userObject.name = response.name\n              this.userObject.email = response.email\n              this.userObject.gender = response.gender\n              this.userObject.password = this.userObject.facebook.id\n              this.userObject.type = `userFB`;\n\n              // Afficher le loader\n              this.loaderIsClose = true;\n\n              // Appeler la fonction du service pour connecter l'utilisateur\n              this.userService.userFacebooConnect(this.userObject)\n                // Success : utilisateur connecté\n                .then( data => {\n                  // Enregistrement du token\n                  localStorage.setItem('MEANSOCIALtoken', data.content.token);\n\n                  // Navigation\n                  window.setTimeout(()=>{\n                    this.router.navigateByUrl(`/dashboard`);\n                  }, 300);\n\n                })\n                // Error : problème serveur\n                .catch( err  => {\n                  console.error(err)\n                })\n            })\n\n            // Capter les érreurs de requête : Facebook API\n            .catch((error: any) => {\n              console.error(error)\n            })\n      })\n\n      // Capter les érreurs de requête : Facebook Login\n      .catch((error: any) => {\n        console.error(error)\n      })\n    }\n\n    // Function User Login\n    public submitLogUser = () => {\n      // Vider les erreurs\n      this.errorMsg.errors = 0;\n\n      // Vérification des informations saisies\n      if( this.userLoginObject.email == null || this.userLoginObject.email.length == 0){\n        // Email manquant\n        this.errorMsg.email = true;\n        this.errorMsg.errors++;\n      }\n      \n      if( this.userLoginObject.password == null || this.userLoginObject.password.length == 0){\n        // Password manquant\n        this.errorMsg.password = true;\n        this.errorMsg.errors++;\n      }\n      \n      if(this.errorMsg.errors === 0){ \n        // => Formulaire validé\n        // Afficher le loader\n        this.loaderIsClose = true;\n\n        this.userService.userLogin(this.userLoginObject).then(user => {\n          // Enregistrement du token\n          localStorage.setItem('MEANSOCIALtoken', user.token);\n\n          // Navigation\n          window.setTimeout(()=>{\n            this.router.navigateByUrl(`/dashboard`);\n          }, 300);\n          \n        }).catch(error => {\n          if(error.status === 404){\n            // Utilisateur inconnu\n            this.errorMsg.invalidUser = true;\n\n          } else if(error.status === 401){\n            // Mot de passe invalide\n            this.errorMsg.invalidPassword = true;\n\n          }\n        })\n      }\n    }\n\n    ngOnInit() {\n      // Introduction\n      window.setTimeout(()=>{\n        this.loaderIsRight = true;\n        window.setTimeout(()=>{\n          this.loaderIsClose = false;\n          this.loaderIsRight = false;\n        }, 300);\n      }, 1000);\n    }\n\n  }\n//\n\n\n// WEBPACK FOOTER //\n// /Users/dwsparis/Documents/htdocs/PROJETS/SOCIALNETWORKauth/ANGclient/src/app/components/homepage/homepage.component.ts","/*\nConfiguration du composants\n*/\n  // Import des interfaces\n  import { NgModule } from '@angular/core';\n  import { CommonModule } from '@angular/common';\n  import { FormsModule } from '@angular/forms';\n\n  // Importer les composants\n  import { HomepageComponent } from './homepage.component';\n  import { Routing } from './route';\n// \n/*\nDéfinition et export du module\n*/\n  // Définition\n  @NgModule({\n    declarations: [ HomepageComponent ],\n    imports: [ Routing, CommonModule, FormsModule ]\n  })\n\n  // Export\n  export class HomepageModule { };\n// \n\n\n// WEBPACK FOOTER //\n// /Users/dwsparis/Documents/htdocs/PROJETS/SOCIALNETWORKauth/ANGclient/src/app/components/homepage/module.ts","// Importer les classes pour définir les routes\nimport { ModuleWithProviders } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n// Importer les composants à utiliser dans les routes\nimport { HomepageComponent } from './homepage.component';\n\n// Créer une constante pour définir le comportement des routes\nconst appRoutes: Routes = [\n    {\n        path: '',\n        component: HomepageComponent\n    }\n]\n\n// Exporter une autre constante pour utiliser les routes\nexport const Routing: ModuleWithProviders = RouterModule.forChild(appRoutes);\n\n\n// WEBPACK FOOTER //\n// /Users/dwsparis/Documents/htdocs/PROJETS/SOCIALNETWORKauth/ANGclient/src/app/components/homepage/route.ts"],"sourceRoot":"webpack:///"}